{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { of } from \"rxjs\";\nimport { map, mergeMap, catchError } from \"rxjs/operators\";\nimport { Effect, ofType } from \"@ngrx/effects\";\nimport * as accountActions from \"./actions\";\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ngrx/effects\";\nimport * as i2 from \"../../services/account.service\";\nexport class AccountStoreEffects {\n  constructor(actions$, accountService) {\n    this.actions$ = actions$;\n    this.accountService = accountService;\n    this.loadAccounts$ = this.actions$.pipe(ofType(accountActions.AccountActionTypes.LOAD_ACCOUNTS), mergeMap(actions => this.accountService.getAccounts().pipe(map(accounts => new accountActions.LoadAccountsSuccess(accounts.data)), catchError(err => of(new accountActions.LoadAccountsFail(err))))));\n    this.loadAccount$ = this.actions$.pipe(ofType(accountActions.AccountActionTypes.LOAD_ACCOUNT), mergeMap(action => this.accountService.getAccountById(action.payload).pipe(map(account => new accountActions.LoadAccountSuccess(account.data)), catchError(err => of(new accountActions.LoadAccountFail(err))))));\n    this.createAccount$ = this.actions$.pipe(ofType(accountActions.AccountActionTypes.CREATE_ACCOUNT), map(action => action.payload), mergeMap(account => this.accountService.createAccount(account).pipe(map(newAccount => new accountActions.CreateAccountSuccess(newAccount.data)), catchError(err => of(new accountActions.CreateAccountFail(err))))));\n    this.updateAccount$ = this.actions$.pipe(ofType(accountActions.AccountActionTypes.UPDATE_ACCOUNT), map(action => action.payload), mergeMap(account => this.accountService.updateAccount(account).pipe(map(updatedAccount => new accountActions.UpdateAccountSuccess({\n      id: updatedAccount.data.id,\n      changes: updatedAccount\n    })), catchError(err => of(new accountActions.UpdateAccountFail(err))))));\n    this.deleteAccount$ = this.actions$.pipe(ofType(accountActions.AccountActionTypes.DELETE_ACCOUNT), map(action => action.payload), mergeMap(id => this.accountService.deleteAccount(id).pipe(map(() => new accountActions.DeleteAccountSuccess(id)), catchError(err => of(new accountActions.DeleteAccountFail(err))))));\n  }\n}\nAccountStoreEffects.ɵfac = function AccountStoreEffects_Factory(t) {\n  return new (t || AccountStoreEffects)(i0.ɵɵinject(i1.Actions), i0.ɵɵinject(i2.AccountService));\n};\nAccountStoreEffects.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n  token: AccountStoreEffects,\n  factory: AccountStoreEffects.ɵfac\n});\n__decorate([Effect()], AccountStoreEffects.prototype, \"loadAccounts$\", void 0);\n__decorate([Effect()], AccountStoreEffects.prototype, \"loadAccount$\", void 0);\n__decorate([Effect()], AccountStoreEffects.prototype, \"createAccount$\", void 0);\n__decorate([Effect()], AccountStoreEffects.prototype, \"updateAccount$\", void 0);\n__decorate([Effect()], AccountStoreEffects.prototype, \"deleteAccount$\", void 0);","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}